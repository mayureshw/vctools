:-import load/2, store/3 from fileio.

:-index(dpe/3,[3]).
:-op(500,xfx,^).
:-op(700,xfx,->).

dep( (N,req0) ^ (N,req1) -> (N,ack0) ) :- dpe(_,N,'vcPhiPipelined').

dep( (N,req0) -> (N,ack0) ^ (N,ack1) ) :- dpe(_,N,'vcBranch').

dep( Dep ) :- dpe(_,N,'vcBinarySplitOperator'),
    (
      Dep = ( (N,req0) -> (N,ack0) );
      Dep = ( (N,req0) -> (N,ack1) );
      Dep = ( (N,req1) -> (N,ack1) ) 
    ).

dep( Dep ) :- dpdep(U,_,D),
    (
      Dep = ( (D,ack1) -> (U,req0) );
      Dep = ( (D,req1) -> (U,ack0) )
    ).

depgen(Vc):- load(vcir,Vc), store(iprops,Vc,dep(D)).
